// =====================================================
// SCSS Mixins Library for Talent-Tuner - Modern @use Version
// =====================================================

@use "sass:map";

// ブレークポイント定義
$breakpoints: (
  'mobile': 480px,
  'tablet': 768px,
  'desktop': 1024px,
  'wide': 1200px
) !default;

// レスポンシブミックスイン
@mixin respond-to($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media (min-width: map.get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Breakpoint `#{$breakpoint}` not found in $breakpoints.";
  }
}

// コンテナミックスイン
@mixin container($max-width: 1200px, $padding: 1rem) {
  max-width: $max-width;
  margin: 0 auto;
  padding-left: $padding;
  padding-right: $padding;
}

// フレックスボックス便利ミックスイン
@mixin flex-center {
  display: flex;
  align-items: center;
  justify-content: center;
}

@mixin flex-between {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

@mixin flex-column($gap: 1rem) {
  display: flex;
  flex-direction: column;
  gap: $gap;
}

@mixin flex-row($gap: 1rem) {
  display: flex;
  align-items: center;
  gap: $gap;
}

// グリッドレイアウトミックスイン
@mixin grid-auto-fit($min-width: 280px, $gap: 1.5rem) {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax($min-width, 1fr));
  gap: $gap;
}

@mixin grid-columns($columns, $gap: 1.5rem) {
  display: grid;
  grid-template-columns: repeat($columns, 1fr);
  gap: $gap;
}

// ボタンスタイルミックスイン
@mixin button-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  padding: 0.75rem 1.5rem;
  border: none;
  border-radius: 8px;
  font-family: inherit;
  font-weight: 600;
  line-height: 1;
  text-decoration: none;
  cursor: pointer;
  transition: all var(--transition-normal);
  white-space: nowrap;

  &:disabled {
    opacity: 0.6;
    cursor: not-allowed;
    pointer-events: none;
  }

  svg {
    width: 1.25rem;
    height: 1.25rem;
    flex-shrink: 0;
  }
}

@mixin button-primary {
  @include button-base;
  background: linear-gradient(135deg, var(--accent-blue), var(--primary-blue));
  color: white;
  box-shadow: var(--shadow-sm);

  &:hover:not(:disabled) {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
  }

  &:active {
    transform: translateY(0);
  }
}

@mixin button-secondary {
  @include button-base;
  background: var(--bg-secondary);
  color: var(--text-primary);
  border: 2px solid var(--border-light);

  &:hover:not(:disabled) {
    background: var(--bg-tertiary);
    border-color: var(--accent-blue);
    transform: translateY(-1px);
  }
}

@mixin button-outline {
  @include button-base;
  background: transparent;
  color: var(--accent-blue);
  border: 2px solid var(--accent-blue);

  &:hover:not(:disabled) {
    background: var(--accent-blue);
    color: white;
    transform: translateY(-1px);
  }
}

@mixin button-size($size) {
  @if $size == 'small' {
    height: var(--btn-height-sm);
    padding: var(--btn-padding-sm);
    font-size: var(--fs-sm);
    border-radius: var(--radius-sm);
  } @else if $size == 'large' {
    height: var(--btn-height-lg);
    padding: var(--btn-padding-lg);
    font-size: var(--fs-lg);
    border-radius: var(--radius-lg);
  } @else if $size == 'xl' {
    height: 56px; // Custom XL height
    padding: 1.25rem 2.5rem;
    font-size: var(--fs-xl);
    border-radius: var(--radius-lg);
  }
}

// カードスタイルミックスイン
@mixin card-base {
  background: var(--bg-primary);
  border-radius: 12px;
  border: 1px solid var(--border-light);
  overflow: hidden;
  transition: all var(--transition-normal);
}

@mixin card-shadow($level: 'md') {
  @if $level == 'sm' {
    box-shadow: var(--shadow-sm);
  } @else if $level == 'md' {
    box-shadow: var(--shadow-md);
  } @else if $level == 'lg' {
    box-shadow: var(--shadow-lg);
  }

  &:hover {
    @if $level == 'sm' {
      box-shadow: var(--shadow-md);
    } @else if $level == 'md' {
      box-shadow: var(--shadow-lg);
    } @else if $level == 'lg' {
      box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
    }
    transform: translateY(-2px);
  }
}

@mixin card-padding($size: 'md') {
  @if $size == 'sm' {
    padding: var(--card-padding-sm);
  } @else if $size == 'md' {
    padding: var(--card-padding-md);
  } @else if $size == 'lg' {
    padding: var(--card-padding-lg);
  } @else if $size == 'xl' {
    padding: var(--card-padding-xl);
  } @else {
    padding: var(--card-padding-md);
  }
}

// ヒーローセクションミックスイン
@mixin hero-section {
  min-height: 70vh;
  @include flex-center;
  text-align: center;
  background: linear-gradient(135deg, var(--primary-navy), var(--primary-blue));
  color: white;
  position: relative;
  overflow: hidden;

  &::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="grain" width="100" height="100" patternUnits="userSpaceOnUse"><circle cx="25" cy="25" r="1" fill="rgba(255,255,255,0.03)"/><circle cx="75" cy="25" r="1" fill="rgba(255,255,255,0.02)"/><circle cx="50" cy="50" r="1" fill="rgba(255,255,255,0.03)"/><circle cx="25" cy="75" r="1" fill="rgba(255,255,255,0.02)"/><circle cx="75" cy="75" r="1" fill="rgba(255,255,255,0.03)"/></pattern></defs><rect width="100" height="100" fill="url(%23grain)"/></svg>');
    pointer-events: none;
  }
}

// セクションスタイルミックスイン
@mixin section-padding($size: 'md') {
  @if $size == 'xs' {
    padding: var(--space-md) 0;
  } @else if $size == 'sm' {
    padding: var(--section-padding-sm);
  } @else if $size == 'md' {
    padding: var(--section-padding-md);
  } @else if $size == 'lg' {
    padding: var(--section-padding-lg);
  } @else {
    padding: var(--section-padding-md);
  }
}

// フォーカススタイル
@mixin focus-ring($color: var(--accent-blue)) {
  &:focus-visible {
    outline: 2px solid $color;
    outline-offset: 2px;
    border-radius: var(--radius-xs);
  }
}

// トランケート（文字切り捨て）
@mixin text-truncate {
  overflow: hidden;
  white-space: nowrap;
  text-overflow: ellipsis;
}

@mixin text-clamp($lines: 3) {
  overflow: hidden;
  display: -webkit-box;
  -webkit-line-clamp: $lines;
  -webkit-box-orient: vertical;
}

// スクリーンリーダー専用テキスト
@mixin sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

// アニメーション関連
@mixin fade-in($duration: 0.3s, $delay: 0s) {
  opacity: 0;
  animation: fade-in $duration ease-out $delay forwards;

  @keyframes fade-in {
    to {
      opacity: 1;
    }
  }
}

// =====================================================
// CSS Variables統合強化ミックスイン
// =====================================================

@mixin border-radius($size: 'md') {
  @if $size == 'xs' {
    border-radius: var(--radius-xs);
  } @else if $size == 'sm' {
    border-radius: var(--radius-sm);
  } @else if $size == 'md' {
    border-radius: var(--radius-md);
  } @else if $size == 'lg' {
    border-radius: var(--radius-lg);
  } @else if $size == 'xl' {
    border-radius: var(--radius-xl);
  } @else if $size == 'round' {
    border-radius: var(--radius-round);
  }
}

@mixin form-input {
  width: 100%;
  height: var(--form-input-height);
  padding: var(--form-input-padding);
  border: var(--form-input-border);
  border-radius: var(--radius-sm);
  font-size: var(--fs-base);
  transition: all var(--transition-fast);
  background: var(--bg-primary);

  &:focus {
    @include focus-ring;
    border: var(--form-input-focus-border);
  }

  &::placeholder {
    color: var(--text-secondary);
  }
}

@mixin z-index($layer: 'base') {
  @if $layer == 'dropdown' {
    z-index: var(--z-dropdown);
  } @else if $layer == 'sticky' {
    z-index: var(--z-sticky);
  } @else if $layer == 'fixed' {
    z-index: var(--z-fixed);
  } @else if $layer == 'modal-backdrop' {
    z-index: var(--z-modal-backdrop);
  } @else if $layer == 'modal' {
    z-index: var(--z-modal);
  } @else if $layer == 'popover' {
    z-index: var(--z-popover);
  } @else if $layer == 'tooltip' {
    z-index: var(--z-tooltip);
  }
}

@mixin slide-up($duration: 0.4s, $delay: 0s, $distance: 2rem) {
  opacity: 0;
  transform: translateY($distance);
  animation: slide-up $duration ease-out $delay forwards;

  @keyframes slide-up {
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
}

// リセット・ユーティリティ
@mixin list-reset {
  margin: 0;
  padding: 0;
  list-style: none;
}

@mixin link-reset {
  color: inherit;
  text-decoration: none;
}