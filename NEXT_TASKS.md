# ため職（talent-tuner）次期開発タスク

## 概要
現在のプロジェクト状況と今後の推奨タスクをまとめたドキュメントです。

## 完了タスク（2025年8月5日時点）
- ✅ ビルドエラーの解消
- ✅ リントエラーの修正
- ✅ TypeScript型チェックの修正
- ✅ AdSense審査用コンテンツ充実（25ページ）

## 優先度別推奨タスク

### 高優先度

#### 1. 本番デプロイ準備
**目的**: 本番環境への安全なデプロイを実現

**実施項目**:
- [ ] 環境変数ファイル（.env）の作成と設定
  - `VITE_STRIPE_PUBLIC_KEY`の設定
  - その他必要な環境変数の確認
- [ ] デプロイスクリプトの動作確認
  - `deploy.sh`の実行権限確認
  - `deploy-rsync.sh`の接続先確認
- [ ] お名前.comサーバー設定
  - SSL証明書の確認
  - PHPバージョン確認（7.4以上）
  - .htaccess設定

**推定工数**: 2-3時間

#### 2. Stripe決済機能の本番実装
**目的**: 詳細診断レポートの有料販売機能を完成

**実施項目**:

##### 2-1. Stripeアカウント設定
- [ ] Stripeアカウント作成・本人確認
- [ ] 本番APIキー取得
- [ ] 商品・価格設定（500円）
- [ ] Webhook設定

##### 2-2. バックエンド実装
- [ ] PHP環境構築（Composer、Stripe SDK）
- [ ] `create-checkout-session.php`の本実装
- [ ] Webhook処理（`webhook.php`）
- [ ] セキュリティ対策（署名検証、CSRF）

##### 2-3. PDF生成機能
- [ ] PDF生成ライブラリ選定（TCPDF推奨）
- [ ] PDFテンプレート作成
- [ ] `generate-pdf.php`実装
- [ ] ダウンロード機能実装

##### 2-4. データベース設計
```sql
CREATE TABLE purchases (
  id INT PRIMARY KEY AUTO_INCREMENT,
  session_id VARCHAR(255) UNIQUE,
  email VARCHAR(255),
  result_data JSON,
  pdf_url VARCHAR(255),
  created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

##### 2-5. メール送信機能
- [ ] 購入確認メール
- [ ] PDFダウンロードリンク送信

**推定工数**: 20-30時間

### 中優先度

#### 3. Google AdSense申請
**目的**: 広告収益化の開始

**実施項目**:
- [ ] AdSenseアカウント作成
- [ ] サイト審査申請
- [ ] 審査通過後の広告コード実装
- [ ] 広告配置の最適化

**前提条件**:
- 25ページのコンテンツ（完了済み）
- プライバシーポリシー（完了済み）
- お問い合わせページ（完了済み）

**推定工数**: 2-3時間（申請作業）

### 低優先度

#### 4. SEO・パフォーマンス最適化
- [ ] Google Search Console設定
- [ ] Google Analytics導入
- [ ] Core Web Vitals改善
- [ ] 画像最適化（WebP変換など）

#### 5. 機能拡張
- [ ] 診断結果の保存機能
- [ ] SNSシェア機能の強化
- [ ] より詳細な診断オプション

## 開発フロー推奨

1. **本番デプロイ準備**を最初に完了
   - 安定した本番環境が他のタスクの前提

2. **Stripe決済機能**を段階的に実装
   - テスト環境で完全動作確認後、本番移行

3. **AdSense申請**はサイト公開後に実施
   - デプロイ完了後すぐに申請可能

## リスクと対策

### リスク1: Stripe実装の複雑性
**対策**: 
- 段階的な実装（まずテスト環境で完全動作）
- エラーハンドリングの充実
- ログ記録の実装

### リスク2: お名前.comサーバーの制限
**対策**:
- PHPバージョン・機能の事前確認
- 代替ソリューションの準備（外部API利用など）

### リスク3: AdSense審査不合格
**対策**:
- コンテンツ品質の維持
- ポリシー違反の事前チェック
- 再審査に向けた改善計画

## 次のアクション

モダンUIデザインのための新ブランチ作成に進みます。